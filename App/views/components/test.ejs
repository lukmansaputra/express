

<script>  
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
  
    form.addEventListener("submit", function (e) {
      e.preventDefault();
      console.log("disini");
      
  
      const formData = new FormData();
  
      // Ambil input lainnya
      const product_id = document.getElementById("product_id").value.trim();
      const name = document.getElementById("product_name").value.trim();
      const price = document.getElementById("price").value.trim();
      const width = document.getElementById("item-width").value.trim();
      const height = document.getElementById("item-height").value.trim();
      const weight = document.getElementById("item-weight").value.trim();
      const description = quill.root.innerHTML.trim();
      const category_id = document.getElementById("category").value.trim();
  
      if (!name || !price || !description || !category_id) {
        alert("Please fill all required fields.");
        return;
      }
      formData.append("product_id", product_id);
      formData.append("item_width", width);
      formData.append("item_height", height);
      formData.append("item_weight", weight);
      formData.append("product_name", name);
      formData.append("product_price", price);
      formData.append("description", description);
      formData.append("category_id", category_id);
  
      // Tambahkan gambar baru
      selectedFiles.forEach((file) => {
        formData.append("images", file);
      });
  
      // Tambahkan gambar lama (yang tidak dihapus)
      existingImages.forEach((url) => {
        formData.append("existing_images[]", url);
      });
  
      // Kirim ke backend
      fetch("/dashboard", {
        method: "POST",
        body: formData,
      })
        .then((res) => {
          if (!res.ok) throw new Error("Failed to submit");
          console.log(res.json());
          
          return res.json();
        })
        .then((data) => {
          alert("Product updated successfully");
          window.location.href = "/dashboard/product"; // Atau redirect sesuai kebutuhan
        })
        .catch((err) => {
          console.error(err);
          alert("Error: " + err.message);
        });
    });
  })
  </script>

